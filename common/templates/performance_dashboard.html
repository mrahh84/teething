{% extends "base.html" %}
{% load static %}

{% block title %}Performance Dashboard - Road Attendance System{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h1 class="dashboard-title">üìä Performance Dashboard</h1>
        <p class="dashboard-subtitle">System performance metrics and analytics</p>
    </div>
    
    <!-- System Metrics -->
    <div class="card-grid">
        <div class="card">
            <div class="card-value text-primary">{{ total_employees }}</div>
            <div class="card-label">Total Employees</div>
        </div>
        <div class="card">
            <div class="card-value text-success">{{ active_employees }}</div>
            <div class="card-label">Active Employees</div>
        </div>
        <div class="card">
            <div class="card-value text-warning">{{ total_events }}</div>
            <div class="card-label">Total Events</div>
        </div>
        <div class="card">
            <div class="card-value text-primary">{{ attendance_rate }}%</div>
            <div class="card-label">Attendance Rate</div>
        </div>
    </div>
    
    <!-- System Performance -->
    <div class="section">
        <div class="section-header">
            <h3 class="section-title">‚ö° System Performance</h3>
        </div>
        <div class="section-body">
            <div class="card-grid">
                <div class="card">
                    <div class="card-value">{{ system_uptime }}%</div>
                    <div class="card-label">System Uptime</div>
                </div>
                <div class="card">
                    <div class="card-value">{{ response_time }}ms</div>
                    <div class="card-label">Avg Response Time</div>
                </div>
                <div class="card">
                    <div class="card-value">{{ database_size }}MB</div>
                    <div class="card-label">Database Size</div>
                </div>
                <div class="card">
                    <div class="card-value">{{ cache_hit_rate }}%</div>
                    <div class="card-label">Cache Hit Rate</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recent Activity -->
    <div class="section">
        <div class="section-header">
            <h3 class="section-title">üìà Recent Activity</h3>
        </div>
        <div class="section-body">
            {% if recent_activity %}
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Event</th>
                            <th>User</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for activity in recent_activity %}
                        <tr>
                            <td>{{ activity.timestamp|date:"M d, H:i" }}</td>
                            <td>{{ activity.event_type }}</td>
                            <td>{{ activity.user.username|default:"System" }}</td>
                            <td>{{ activity.description }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                <p>No recent activity to display</p>
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- System Health -->
    <div class="section">
        <div class="section-header">
            <h3 class="section-title">üè• System Health</h3>
        </div>
        <div class="section-body">
            <div class="card-grid">
                <div class="card">
                    <div class="card-value text-success">‚úÖ</div>
                    <div class="card-label">Database</div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--success-color);">Healthy</div>
                </div>
                <div class="card">
                    <div class="card-value text-success">‚úÖ</div>
                    <div class="card-label">Cache</div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--success-color);">Healthy</div>
                </div>
                <div class="card">
                    <div class="card-value text-success">‚úÖ</div>
                    <div class="card-label">File System</div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--success-color);">Healthy</div>
                </div>
                <div class="card">
                    <div class="card-value text-success">‚úÖ</div>
                    <div class="card-label">Network</div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--success-color);">Healthy</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 